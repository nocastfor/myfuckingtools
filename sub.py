import os

print("====================================================================================")
domain = input("Enter Your Target Domain : ")
print("====================================================================================")


def subdomains():
    os.system("mkdir Subdomains")
    subfinder = "subfinder -d " + domain + " | tee Subdomains/subfinder_result.txt"
    sublist3r = "sublist3r -d " + domain + " | tee Subdomains/sublist3r_result.txt"
    assetfinder = "assetfinder --subs-only " + domain + " | tee Subdomains/assetfinder_result.txt"
    findomain = "findomain -t " + domain + " | tee Subdomains/findomain.txt"
    shosubgo = "shosubgo -d " + domain + " -s ojUJJWDFqszZHHkDTLw5boVgzUjnACzx | tee Subdomains/shosubgo_result.txt"

    print("\033[32m====================================================================================")
    print("\033[33m[================================= SubFinder Start =================================]")
    print("\033[32m====================================================================================")
    os.system(subfinder)
    print("\033[32m====================================================================================")
    print("\033[33m[================================= SubFinder Done =================================]")
    print("\033[32m====================================================================================")



    print("====================================================================================")
    print("[================================= Sublist3r Start =================================]")
    print("====================================================================================")
    os.system(sublist3r)
    print("====================================================================================")
    print("[================================= Sublist3r Done =================================]")
    print("====================================================================================")



    print("====================================================================================")
    print("[================================= AssetFinder Start =================================]")
    print("====================================================================================")
    os.system(assetfinder)
    print("====================================================================================")
    print("[================================= AssetFinder Done =================================]")
    print("====================================================================================")



    print("====================================================================================")
    print("[================================= Findomain Start  =================================]")
    print("====================================================================================")
    os.system(findomain)
    print("====================================================================================")
    print("[================================= Findomain Done =================================]")
    print("====================================================================================")





    
    print("====================================================================================")
    print("[================================= shosubgo Start  =================================]")
    print("====================================================================================")
    os.system(shosubgo)
    print("====================================================================================")
    print("[================================= shosubgo Done =================================]")
    print("====================================================================================")








def merge_data():
    os.system("cd Subdomains")
    def merge_files(files):
        merged_lines = set()

        for file_name in files:
            with open(file_name, 'r') as file:
                merged_lines.update(file.readlines())

        with open('all_subdomains.txt', 'w') as merged_file:
            merged_file.writelines(merged_lines)


    files_to_merge = ['subfinder_result.txt', 'sublist3r_result.txt', 'assetfinder_result.txt','findomain.txt', 'shosubgo_result.txt']
    
    print("====================================================================================")
    print("====================================================================================")
    print("All Subdomains Was Merged to File : all_subdomains.txt ")
    print("====================================================================================")
    print("====================================================================================")

    merge_files(files_to_merge)



def check_alive():
    os.system("cd ..")
    print("====================================================================================")
    print("[================================= HttpX Start =================================]")
    print("====================================================================================")
    os.system("cat all_subdomains.txt | httpx-toolkit -silent -probe -ip -server -fr -ct -cname -title -status-code | tee Subdomains/alive-subdomains.txt ")
    print("====================================================================================")
    print("[================================= HttpX Done =================================]")
    print("====================================================================================")



def last():

    dnsx = "dnsx -d " + domain + " -a -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt | tee Subdomains/dnsx_result.txt"

    print("====================================================================================")
    print("[================================= DnsX Start  =================================]")
    print("====================================================================================")
    os.system(dnsx)
    print("====================================================================================")
    print("[================================= DnsX Done =================================]")
    print("====================================================================================")

    os.system("cd ..")
    print("====================================================================================")
    print("[================================= HttpX Start =================================]")
    print("====================================================================================")
    os.system("cat dnsx_result.txt | httpx-toolkit -silent -probe -ip -server -fr -ct -cname -title -status-code | tee Subdomains/alive-subdomains2.txt ")
    print("====================================================================================")
    print("[================================= HttpX Done =================================]")
    print("====================================================================================")





subdomains()
merge_data()
check_alive()
last()
